<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cart Page</title>
    <link rel="icon" href="../img/logo.avif" />
    <link rel="stylesheet" href="../css/bootstrap.min.css" />
    <link rel="stylesheet" href="../css/all.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/font-awesome.min.css" />
    <script src="../js/jquery.min.js"></script>
    <script src="../js/bootstrap.min.js"></script>

    <script>
        $(document).ready(function() {
            $("#sellectAllOfCart").click(function() {
                if ($(this).is(":checked")) {
                    $("input[name='productInCart1']").prop("checked", true);
                    $("input[name='productInCart2']").prop("checked", true);
                    $("input[name='productInCart3']").prop("checked", true);
                } else {
                    $("input[name='productInCart1']").prop("checked", false);
                    $("input[name='productInCart2']").prop("checked", false);
                    $("input[name='productInCart3']").prop("checked", false);
                }
            });

            $("input[name='productInCart1']").click(function() {
                if (!$(this).is(":checked")) {
                    $("#sellectAllOfCart").prop("checked", false);
                }
            });

            $("input[name='productInCart2']").click(function() {
                if (!$(this).is(":checked")) {
                    $("#sellectAllOfCart").prop("checked", false);
                }
            });

            $("input[name='productInCart3']").click(function() {
                if (!$(this).is(":checked")) {
                    $("#sellectAllOfCart").prop("checked", false);
                }
            });

            $("#removeProduct").click(function() {
                if (
                    $("input[name='productInCart1']").is(":checked") ||
                    $("input[name='productInCart2']").is(":checked") ||
                    $("input[name='productInCart3']").is(":checked")
                ) {
                    if (confirm("Bạn có muốn xóa sản phẩm này không?")) {
                        if ($("input[name='productInCart1']").is(":checked")) {
                            $("input[name='productInCart1']").parent().parent().remove();
                        }
                        if ($("input[name='productInCart2']").is(":checked")) {
                            $("input[name='productInCart2']").parent().parent().remove();
                        }
                        if ($("input[name='productInCart3']").is(":checked")) {
                            $("input[name='productInCart3']").parent().parent().remove();
                        }
                    }
                } else {
                    alert("Vui lòng chọn sản phẩm để xóa");
                }
            });

            $("#btnCartToPay").click(function() {
                if (
                    $("input[name='productInCart1']").is(":checked") ||
                    $("input[name='productInCart2']").is(":checked") ||
                    $("input[name='productInCart3']").is(":checked")
                ) {
                    $("#errPayment").html("");
                    window.location.href = "payment.html";
                } else {
                    $("#errPayment").html("Vui lòng chọn sản phẩm để thanh toán");
                }
            });

            $("#btnDecrease").click(function() {
                var quantity = $("#quantity").val();
                if (quantity > 1) {
                    quantity--;
                    $("#quantity").val(quantity);
                    var priceOfAProduct = $(".priceOfAProduct").html();
                    priceOfAProduct = priceOfAProduct.replace(".", "");
                    var totalPriceOfAProduct = quantity * priceOfAProduct;
                    $(".totalPriceOfAProduct").html(
                        totalPriceOfAProduct.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ".")
                    );
                }
            });

            $("#btnIncrease").click(function() {
                var quantity = $("#quantity").val();
                quantity++;
                $("#quantity").val(quantity);
                var priceOfAProduct = $(".priceOfAProduct").html();
                priceOfAProduct = priceOfAProduct.replace(".", "");
                var totalPriceOfAProduct = quantity * priceOfAProduct;
                $(".totalPriceOfAProduct").html(
                    totalPriceOfAProduct.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ".")
                );
            });

            $(function() {
                $(".header").load("header.html");
                $(".footer").load("footer.html");
            });
        })
    </script>
</head>

<body>
    <div class="header"></div>

    <div class="container">

        <h2 class="mt-5"> <img src="../img/shopping_cart_icon.png" height="50px"> Giỏ hàng (1 sản phẩm)</h2>

        <div class="mt-3">
            <table class="table table-bordered">
                <thead>
                    <tr>
                        <th class="p-1"> <input type="checkbox" name="sellectAllOfCart" id="sellectAllOfCart" class="ml-3"> <label for="sellectAllOfCart">Chọn tất cả</label></th>
                        <th>Ảnh sản phẩm</th>
                        <th>Tên sản phẩm</th>
                        <th>Giá</th>
                        <th>Số lượng</th>
                        <th>Thành tiền (VNĐ)</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td style="text-align: center; vertical-align: middle;"> <input type="checkbox" name="productInCart1" id="productInCart1" style="zoom: 3;"> </td>
                        <td>
                            <img src="./img/sach_hanhtrinhvephuongdong.jpg" height="100px" />
                        </td>
                        <td>Hành trình về phương đông</td>
                        <td class="priceOfAProduct">110.000</td>
                        <td>
                            <button class="btn btn-primary" id="btnDecrease">-</button>
                            <input type="text" name="quantity" id="quantity" value="1" style="width: 50px; text-align: center;" readonly>
                            <button class="btn btn-primary" id="btnIncrease">+</button>
                        </td>
                        <td class="totalPriceOfAProduct">220.000</td>
                        <td style="text-align: center; vertical-align: middle;"> <img src="./img/remove.png" height="50px" id="removeProduct"> </td>
                    </tr>

                    <tr>
                        <td colspan="5">Tổng tiền (Đã bao gồm VAT)</td>
                        <td class="totalPriceToPay">0 VNĐ</td>
                    </tr>
                </tbody>
            </table>
        </div>
        </form>
        <div class="text-danger" id="errPayment"></div>
        <div class="row">
            <button class="btn btn-block btn-success mb-5 mr-3 ml-3" id="btnCartToPay">
          Thanh toán
        </button>
        </div>
    </div>
</body>
<div class="footer"></div>

</html>